<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"
    integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<div class="main--content">
    <div class="row">
        <div class="col-6">
            <canvas id="myChart"></canvas>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        axios.get('/admin/data').then(e => {
            console.log(e.data)
            const paid = e.data.orders.reduce((acc, crr) => {
                if (crr.paid) {

                    acc++
                }
                return acc
            }, 0);
            const order = e.data.orders.length
            const unpaid = e.data.orders.length - paid
            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['order received', 'paid', 'unpaid'],
                    datasets: [{
                        label: '# order',
                        data: [order, paid, unpaid],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    //cutoutPercentage: 40,
                    responsive: false,
                    plugins: {
                        legend: {

                            position: 'right',
                        },
                        title: {
                            display: true,
                            text: 'Orders'
                        }
                    }

                }
            });
        })
    })
</script>