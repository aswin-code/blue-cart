<section class="section-content padding-y">

	<!-- ============================ COMPONENT REGISTER   ================================= -->
	<div class="card mx-auto" style="max-width:520px; margin-top:40px;">
		<article class="card-body">
			<header class="mb-4">
				<h4 class="card-title">Add User</h4>
				<p id="invalid" style="color:red;"></p>
			</header>
			{{#if message}}
			<p>user already exist</p>
			{{/if}}
			<form id="form">
				<div class="form-row">
					<div class="col form-group">
						<label>First name</label>
						<input type="text" class="form-control" placeholder="" id="fname">
					</div> <!-- form-group end.// -->
					<div class="col form-group">
						<label>Last name</label>
						<input type="text" class="form-control" placeholder="" id="lname">
					</div> <!-- form-group end.// -->
				</div> <!-- form-row end.// -->
				<div class="form-group">
					<label>Email</label>
					<input type="email" class="form-control" placeholder="" id="email">
					<small class="form-text text-muted">We'll never share your email with anyone else.</small>
				</div> <!-- form-group end.// -->
				<div class="form-group">
					<label class="custom-control custom-radio custom-control-inline">
						<input class="custom-control-input" checked="" type="radio" value="male" name="gender">
						<span class="custom-control-label"> Male </span>
					</label>
					<label class="custom-control custom-radio custom-control-inline">
						<input class="custom-control-input" type="radio" value="female" name="gender">
						<span class="custom-control-label"> Female </span>
					</label>
				</div> <!-- form-group end.// -->
				<div class="form-row">
					<div class="form-group col-md-6">
						<label>City</label>
						<input type="text" class="form-control" id="city">
					</div> <!-- form-group end.// -->
					<div class="form-group col-md-6">
						<label>Country</label>
						<select id="inputState" class="form-control" name="country">
							<option> Choose...</option>
							<option>Uzbekistan</option>
							<option>Russia</option>
							<option selected="">United States</option>
							<option>India</option>
							<option>Afganistan</option>
						</select>
					</div> <!-- form-group end.// -->
				</div> <!-- form-row.// -->
				<div class="form-row">
					<div class="form-group col-md-6">
						<label>Create password</label>
						<input class="form-control" type="password">
					</div> <!-- form-group end.// -->
					<div class="form-group col-md-6">
						<label>Repeat password</label>
						<input class="form-control" type="password" id="password">
					</div> <!-- form-group end.// -->
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary btn-block"> Register </button>
				</div> <!-- form-group// -->

			</form>
		</article><!-- card-body.// -->
	</div> <!-- card .// -->
	<p class="text-center mt-4">Have an account? <a href="">Log In</a></p>
	<br><br>
	<!-- ============================ COMPONENT REGISTER  END.// ================================= -->


</section>
<script>
	const register = async (fname, lname, email, gender, city, country, password) => {
		try {
			const res = await axios.post('/admin/users', {
				fname,
				lname,
				email,
				city,
				gender,
				country,
				password
			}
			).then(e => {
				console.log(e.data)
				//window.location.assign(e.data.url);
			})

		} catch (err) {
			console.log(err)
		}

	}

	document.getElementById('form').addEventListener('submit', e => {
		e.preventDefault();
		const fname = document.getElementById('fname').value
		const lname = document.getElementById('lname').value
		const email = document.getElementById('email').value
		const gender = radioValue();
		const city = document.getElementById('city').value
		const country = checkCountry();

		const password = document.getElementById('password').value

		function radioValue() {
			var ele = document.getElementsByName('gender');

			for (i = 0; i < ele.length; i++) {
				if (ele[i].checked)
					return ele[i].value;
			}
		}

		function checkCountry() {
			const country = document.querySelector('#inputState')
			return country.options[country.selectedIndex].value
		}
		if (fname && lname && email && gender && city && country && password) {

			register(fname, lname, email, gender, city, country, password);
		} else {
			document.getElementById('invalid').innerText = "please fill the form"
		}
	})
</script>